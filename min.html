<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
	<style>body{margin:0;background-color:rgba(30,30,130,.85);color:#fff}#main,#back,#front{position:absolute;border:1px solid #fff;border-radius:3px}a{font-size:20px;font-weight:700;color:#fff}.smalltxt{font-size:16px}.revtxt{font-size:12px}.holdingRect{color:#fff;padding:5px;background-color:rgba(30,30,30,1);border:3px solid #888;border-radius:3px;overflow:auto;margin:5px}#inventoryMenu,#battleWindow{margin:auto;min-height:540px;width:305px;display:none;background-color:rgba(30,30,110,.85)}.messageMenu{margin:auto;width:305px;height:200px;display:none;background-color:rgba(30,30,30,1)}#enemyImage{margin:auto;width:200px;height:200px;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:pixelated;-ms-interpolation-mode:nearest-neighbor}#enemyPlate{background-color:gray}#deathmenu{display:none}#titleScreen,#deathmenu{position:absolute;width:100%;font-size:50px;text-align:center;top:200px}#options{position:absolute;display:none}#storeMenu{width:305px;height:405px;margin:auto;display:none;background-color:rgba(30,30,110,.85)}#inventoryMenu{font-size:13px;display:none}#titlePlate{text-align:left;font-size:14px;font-weight:700;width:125px}.invItems{overflow:auto;min-height:210px;max-height:210px}#spellsPlate{overflow:auto;min-height:105px;max-height:105px}#outputPlate{overflow:auto;min-height:155px;max-height:155px}.mp{font-size:9px}#container{position:absolute}.right{text-align:right}.centertext{text-align:center}button{background:#000;background:linear-gradient(#999,#282828);border-radius:9px 9px 9px 9px;font-size:16px;font-weight:400;width:125px;cursor:pointer;border:0;color:#ccc;margin:.3em;padding:10px;text-shadow:0 2px 2px rgba(0,0,0,1)}button:active{text-shadow:0 0 30px #fff,0 0 20px #fff,0 0 10px #fff;top:1px;background:linear-gradient(#282828,#999);text-shadow:0 2px 2px rgba(0,0,0,.5)}button:disabled{opacity:.5}button:hover{text-shadow:0 0 4px #999,0 0 7px #fff,0 0 10px #fff}button:focus{outline:none}</style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="mobile-web-app-capable" content="yes">
</head>
<body>
    <script>var $ = {};</script>
	<canvas id="back"></canvas>
	<canvas id="main" ></canvas>
	<canvas id="front" onclick="$.onclick()"></canvas>


	
    <script>function grass(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=tileSize,e.height=tileSize;var a=2*e.height,n=2*e.width;t.fillStyle=goodPalette[5],t.strokeStyle=t.fillStyle,t.fillRect(0,0,n,a);for(var i=80*(tileSize/25);i--;)t.fillStyle=goodPalette[6],t.strokeStyle=t.fillStyle,t.fillRect(Math.random()*n-2,Math.random()*a-2,1*(tileSize/25),1*(tileSize/25));var r=new Image;return r.src=e.toDataURL(),r}function sand(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=tileSize,e.height=tileSize;var a=2*e.height,n=2*e.width;t.fillStyle=goodPalette[7],t.strokeStyle=t.fillStyle,t.fillRect(0,0,n,a);for(var i=80*(tileSize/25);i--;)t.fillStyle=goodPalette[0],t.strokeStyle=t.fillStyle,t.fillRect(Math.random()*n-2,Math.random()*a-2,1*(tileSize/25),1*(tileSize/25));var r=new Image;return r.src=e.toDataURL(),r}function water(e){var t=document.createElement("canvas"),a=t.getContext("2d");t.width=tileSize,t.height=tileSize;var n=t.height,i=t.width;a.fillStyle=goodPalette[8],a.strokeStyle=a.fillStyle,a.fillRect(0,0,i,n);for(var r=2;r--;)for(var o=n/2*r+2.5,l=i;l--;)a.fillStyle=goodPalette[9],a.strokeStyle=a.fillStyle,a.fillRect(l,1*Math.random()+o,pixelSize,pixelSize),a.fillStyle=goodPalette[10],a.strokeStyle=a.fillStyle,a.fillRect(l,1*Math.random()+o+2,pixelSize,pixelSize),a.fillStyle=goodPalette[11],a.strokeStyle=a.fillStyle,a.fillRect(l,1*Math.random()+o+4,pixelSize,pixelSize);if(4===e||5===e||6===e||8===e||10===e||12===e||13===e)for(var s=0;25>s;s++)for(var y=0;25>y;y++)1===waterLandRightMapping[s][y]&&(a.fillStyle=goodPalette[7],a.strokeStyle=a.fillStyle,a.fillRect(y,s,1,1)),2===waterLandRightMapping[s][y]&&(a.fillStyle=goodPalette[10],a.strokeStyle=a.fillStyle,a.fillRect(y,s,1,1));if(2===e||3===e||6===e||9===e||10===e||12===e||14===e)for(var s=0;25>s;s++)for(var y=0;25>y;y++)1===waterLandLeftMapping[s][y]&&(a.fillStyle=goodPalette[7],a.strokeStyle=a.fillStyle,a.fillRect(y,s,1,1)),2===waterLandLeftMapping[s][y]&&(a.fillStyle=goodPalette[10],a.strokeStyle=a.fillStyle,a.fillRect(y,s,1,1));if(1===e||2===e||5===e||6===e||11===e||13===e||14===e)for(var s=0;25>s;s++)for(var y=0;25>y;y++)1===waterLandTopMapping[s][y]&&(a.fillStyle=goodPalette[7],a.strokeStyle=a.fillStyle,a.fillRect(y,s,1,1)),2===waterLandTopMapping[s][y]&&(a.fillStyle=goodPalette[10],a.strokeStyle=a.fillStyle,a.fillRect(y,s,1,1));if(7===e||8===e||9===e||10===e||11===e||13===e||14===e)for(var s=0;25>s;s++)for(var y=0;25>y;y++)1===waterLandBottomMapping[s][y]&&(a.fillStyle=goodPalette[7],a.strokeStyle=a.fillStyle,a.fillRect(y,s,1,1)),2===waterLandBottomMapping[s][y]&&(a.fillStyle=goodPalette[10],a.strokeStyle=a.fillStyle,a.fillRect(y,s,1,1));var c=new Image;return c.src=t.toDataURL(),c}function createSprite(e,t,a){var n=document.createElement("canvas"),i=n.getContext("2d");if(n.width=25,n.height=25,void 0!=a){i.fillStyle=goodPalette[5],i.strokeStyle=i.fillStyle;var r=2*n.height,o=2*n.width;i.fillRect(0,0,o,r);for(var l=80*(tileSize/25);l--;)i.fillStyle=goodPalette[6],i.strokeStyle=i.fillStyle,i.fillRect(Math.random()*o-2,Math.random()*r-2,1*(tileSize/25),1*(tileSize/25))}for(var s=0;s<e.length;s++)for(var y=0;y<e[s].length;y++){var c=e[s][y];void 0!=c&&0!=c&&(i.fillStyle=t[c-1],i.strokeStyle=i.fillStyle,i.fillRect(y,s,1,1))}var p=new Image;return p.src=n.toDataURL(),p}$.spell=[{name:"fire 1",damage:10,mp:4},{name:"heal 1",heal:15,mp:2},{name:"heal 2",heal:30,mp:5},{name:"fire 2",damage:20,mp:8}];var inn=[{name:"Full HP & MP",damage:0,cost:10,type:"inn"}],weapon=[{name:"wood sword",damage:1,cost:10,type:"weapon"},{name:"copper sword",damage:3,cost:300,type:"weapon"},{name:"steel sword",damage:6,cost:600,type:"weapon"},{name:"epic sword",damage:10,cost:1200,type:"weapon"}],armor=[{name:"underwear",armor:1,cost:10,type:"armor"},{name:"copper armor",armor:3,cost:225,type:"armor"},{name:"steel armor",armor:4,cost:450,type:"armor"},{name:"epic armor",armor:10,cost:900,type:"armor"}],shield=[{name:"leather shield",armor:1,cost:10,type:"shield"},{name:"wood shield",armor:2,cost:150,type:"shield"},{name:"steel shield",armor:3,cost:300,type:"shield"},{name:"epic shield",armor:6,cost:600,type:"shield"}],store=[[weapon[1],armor[1],shield[1]],[inn[0]],[weapon[1],weapon[2],armor[2],shield[2]],[weapon[3],armor[2],armor[3],shield[3]]];$.battleSystem=function(e,t){this.screen=document.getElementById("battleWindow"),this.actions=document.getElementById("actionPlate"),this.log=document.getElementById("outputPlate"),this.spells=document.getElementById("spellsPlate"),this.backButton=document.getElementById("battleBack"),this.enemyImage=document.getElementById("enemyImage"),document.getElementById("options").style.display="none",this.endFunc=t,this.turnTick=90,this.turnTimer=0,this.effect=0,this.turn=0,this.enemycontext=enemyImage.getContext("2d"),this.enemycontext.clearRect(0,0,$.W,$.H),this.hp=document.getElementById("hp"),this.mp=document.getElementById("mp"),this.show(),this.player=$.Player;var a=0,n=$.currentMap.enemylocations;if(e)a=e;else{$.reverse&&$.currentMap.canReverse&&(n=$.currentMap.RevEnemylocations);var i=n.filter(function(e){return $.Player.x>=e.x&&$.Player.x<=e.x+e.w&&$.Player.y>=e.y&&$.Player.y<=e.y+e.h}),r=Math.round(Math.random()*(i[0].type.length-1));a=i[0].type[r]}this.enemy=new $.enemy(enemies[a]),this.enemycontext.drawImage($.chars[enemies[a].image],0,0),this.showLog("a "+this.enemy.name+" appeared")},$.battleSystem.prototype.enemyDamage=function(){this.effect=20;for(var e=10;e--;)this.enemycontext.fillStyle="rgb(255,0,0)",this.enemycontext.strokeStyle=$.frontctx.fillStyle,this.enemycontext.fillRect(25*Math.random(),25*Math.random(),2*Math.random(),2*Math.random())},$.battleSystem.prototype.actionAttack=function(){var e=this.player.attack();this.showLog("you hit for "+e),this.enemyDamage(e),0!=this.checkStatus()&&(this.turnTimer=0,this.turn=1)},$.battleSystem.prototype.checkStatus=function(){if(this.enemy.HP<=0){void 0!=this.endFunc&&this.endFunc(),this.player.gold+=this.enemy.gold,this.showLog("you have gained "+this.enemy.XP+" xp and "+this.enemy.gold+" gold"),void 0!=this.enemy.item&&(this.player.addInventory(this.enemy.item),this.showLog("you recieved a "+this.enemy.item.name));var e=this.player.levelUp(this.enemy.XP);if(void 0!=e){this.showLog("you leveled up! ");for(var t in e)"spell"==t?this.showLog("Learned new magic: "+e[t].name):"XPneeded"!=t&&this.showLog(t+" +"+e[t])}return!1}return!0},$.battleSystem.prototype.enemyAction=function(){var e=this.enemy.performAction(this.player);this.effect=20,this.showLog(e)},$.battleSystem.prototype.close=function(){this.screen.style.display="none",$.battle=void 0,document.getElementById("options").style.display="block"},$.battleSystem.prototype.show=function(){this.screen.style.display="block"},$.battleSystem.prototype.showActions=function(){"Dead"==this.enemy.Status&&this.close(),0==this.turn&&(this.log.innerHTML="",this.backButton.style.display="none",this.spells.style.display="none",this.log.style.display="none",this.actions.style.display="block")},$.battleSystem.prototype.showLog=function(e){this.actions.style.display="none",this.spells.style.display="none",this.backButton.style.display="none",this.log.style.display="block",this.log.innerHTML+=e+"<br>"},$.battleSystem.prototype.showSpells=function(){this.spells.innerHTML="";for(var e=this.player.Spells.length;e--;){var t=this.player.Spells[e].mp>this.player.MP?"disabled":"";this.spells.innerHTML+="<button "+t+" onclick='$.battle.actionSpell("+e+" )'>"+this.player.Spells[e].name+"<div class='mp'>"+this.player.Spells[e].mp+" mp</div></button>"}this.actions.style.display="none",this.backButton.style.display="block",this.spells.style.display="block"},$.battleSystem.prototype.actionSpell=function(e){var t=this.player.useSpell(e);this.showLog("your spell hit for "+t),this.enemyDamage(t),0!=this.checkStatus()&&(this.turnTimer=0,this.turn=1)},$.battleSystem.prototype.actionRun=function(){var e=100*Math.random()<this.enemy.runChance;1==e?this.close():(this.showLog("You failed to run away."),this.turnTimer=0,this.turn=1)},$.battleSystem.prototype.update=function(){this.player.HP<=0,this.turnTimer+=$.dt,this.turnTimer>this.turnTick&&this.player.HP>0&&this.enemy.HP>0&&(this.turn?(this.enemyAction(),this.turn=0):"block"==this.log.style.display&&this.showActions(),this.turnTick=60,this.turnTimer=0),this.effect=this.effect>0?this.effect-=1:0},$.battleSystem.prototype.draw=function(){this.hp.innerHTML=this.player.HP,this.mp.innerHTML=this.player.MP,0==this.turn?($.container.style.marginLeft=Math.random()*this.effect+"px",$.container.style.marginTop=Math.random()*this.effect+"px"):this.enemyImage.style.marginTop=Math.random()*this.effect+"px"},$.enemy=function(e){for(var t in e)this[t]=e[t];this.runChance=this.runChance||20,this.HP=this.MaxHP,this.MP=this.MaxMP,this.Status=null},$.enemy.prototype.performAction=function(e){var t=100*Math.random()<30;if(t&&void 0!=this.spell&&this.MP>=this.spell.mp){var a=this.magic(e);return this.MP-=this.magic.mp,"enemy used "+this.spell.name+" for "+a}var a=this.attack(e);return"enemy attacks for "+a},$.enemy.prototype.magic=function(e){return void 0!=this.spell.damage?(e.HP-=this.spell.damage,result=this.spell.damage):void 0!=this.spell.heal&&(this.HP=Math.min(this.spell.heal+this.HP,this.MaxHP),result=this.spell.heal),result},$.enemy.prototype.attack=function(e){var t=Math.max(this.Attack-(e.Resilience+e.Armor.armor+e.Shield.armor),1);return e.HP-=t,t},$.enemy.prototype.flee=function(){},$.enemy.prototype.useSpell=function(){};var enemies=[{name:"nostalgic slime",Agility:10,MaxHP:8,MaxMP:0,Attack:5,Defense:0,XP:10,gold:15,image:2},{name:"dog",Agility:5,MaxHP:5,MaxMP:0,Attack:6,Defense:1,XP:13,gold:20,image:0},{name:"thin man",Agility:5,MaxHP:10,MaxMP:0,Attack:7,Defense:1,XP:15,gold:25,image:1},{name:"frenzied bat",Agility:5,MaxHP:13,MaxMP:0,Attack:12,Defense:2,XP:25,gold:35,image:3},{name:"bat",Agility:5,MaxHP:9,MaxMP:0,Attack:8,Defense:2,XP:18,gold:30,image:6},{name:"bear",Agility:5,MaxHP:15,MaxMP:0,Attack:10,Defense:3,XP:30,gold:40,image:5},{name:"Ninja",Agility:5,MaxHP:25,MaxMP:4,Attack:17,Defense:5,XP:40,gold:50,image:12,spell:$.spell[0]},{name:"yeti",Agility:5,MaxHP:21,MaxMP:0,Attack:14,Defense:7,XP:35,gold:50,image:4},{name:"Final Boss: Myself",Agility:5,MaxHP:50,MaxMP:2,Attack:20,Defense:8,XP:150,gold:140,image:11,spell:$.spell[1],runChance:-1},{name:"Cave Dwelling Ninja",Agility:5,MaxHP:40,MaxMP:4,Attack:19,Defense:7,XP:150,gold:200,image:8,item:armor[3],spell:$.spell[0],runChance:-1}];window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){setInterval(e,60)}}(),$.setup=function(){$.main=document.getElementById("main"),$.back=document.getElementById("back"),$.front=document.getElementById("front"),$.deathmenu=document.getElementById("deathmenu"),$.container=document.getElementById("container"),$.W=window.innerWidth<640?window.innerWidth:640,$.H=window.innerHeight<568?window.innerHeight:568,$.mainctx=$.main.getContext("2d"),$.backctx=$.back.getContext("2d"),$.frontctx=$.front.getContext("2d"),$.main.width=$.W,$.main.height=$.H,$.back.width=$.W,$.back.height=$.H,$.front.width=$.W,$.front.height=$.H,$.container.style.width=$.W+"px",$.container.style.height=$.H+"px",$.playing=!1,window.addEventListener("keydown",$.keydown),window.addEventListener("keyup",$.keyup),$.front.addEventListener("touchstart",$.touchstart),$.front.addEventListener("touchmove",$.touchMove),$.front.addEventListener("touchend",$.touchend),$.keys={w:0,s:0,a:0,d:0,space:0},$.context=void 0,$.reverse=!1,$.currentMap=$.worldMapping,$.types=[],$.types[1]=grass(),$.types[30]=grass(),$.types[2]=createSprite(caveMapping,cavePalette,grass()),$.types[3]=createSprite(townMapping,townPalette,grass()),$.types[4]=createSprite(mountainMapping,mountainPalette,grass()),$.types[5]=sand(),$.types[6]=water(),$.types[7]=water(1),$.types[8]=water(2),$.types[9]=water(3),$.types[10]=water(4),$.types[11]=water(5),$.types[12]=water(6),$.types[13]=createSprite(contextClue,contextCluePalette),$.types[14]=createSprite(brick,brickPalette),$.types[15]=createSprite(brick,brick2Palette),$.types[16]=createSprite(brick,groundPalette),$.types[17]=createSprite(weaponStore,brickPalette),$.types[18]=water(7),$.types[19]=water(8),$.types[20]=water(9),$.types[21]=water(10),$.types[22]=water(11),$.types[23]=water(12),$.types[24]=water(13),$.types[25]=water(14),$.types[26]=createSprite(tree,treePalette,grass()),$.types[27]=createSprite(innStore,brickPalette),$.types[28]=water(4),$.chars=[],$.chars[0]=createSprite(dog,contextCluePalette),$.chars[1]=createSprite(creepythin,creepythinPalette),$.chars[2]=createSprite(slime,slimePalette),$.chars[3]=createSprite(bat,batPalette),$.chars[4]=createSprite(yeti,yetiPalette),$.chars[5]=createSprite(bear,bearPalette),$.chars[6]=createSprite(bat,regbatPalette),$.chars[7]=createSprite(playermapping,npcPalette),$.chars[8]=createSprite(ninja,ninjaPalette),$.chars[9]=createSprite(playermapping,npc2Palette),$.chars[10]=createSprite(playermapping,npc3Palette),$.chars[11]=createSprite(playermapping,playerPalette),$.chars[12]=createSprite(ninja,ninja2Palette),$.battle=void 0,$.playerSprite=createSprite(playermapping,playerPalette),$.Player=new $.player,$.Player.x=$.currentMap.PlayerInit.x,$.Player.y=$.currentMap.PlayerInit.y,$.Enemy=void 0,$.world=void 0,$.npc=[],$.newStore=void 0,$.newMessage=void 0,$.updateDelta(),$.createStarsBackground(),$.loop()},$.updateDelta=function(){var e=Date.now();$.dt=(e-$.lt)/(1e3/60),$.lt=e,$.elapsed+=$.dt},$.loop=function(){if(requestAnimFrame($.loop),$.updateDelta(),$.playing){$.container.style.display=void 0==$.battle&&void 0==$.newStore&&void 0==$.newMessage&&"block"!=document.getElementById("endScreen").style.display&&"block"!=$.Player.inventoryScreen.style.display&&"block"!=$.deathmenu.style.display?"none":"block",$.Player.update(),$.world.update();for(var e=$.npc.length;e--;)$.npc[e].update();for($.mainctx.save(),$.mainctx.clearRect(0,0,$.W,$.H),$.mainctx.translate(-($.Player.x-$.W/2),-($.Player.y-$.H/2)),$.world.draw(),e=$.npc.length;e--;)$.npc[e].draw();$.Player.draw(),$.mainctx.restore(),void 0!=$.battle&&($.battle.update(),$.battle.draw())}},$.worldTravel=function(){var e=document.getElementById("revText");e.innerHTML="Go to REVearth"==e.innerHTML?"Go to Earth":"Go to REVearth"},$.createStarsBackground=function(){for($.mainctx.fillStyle="#000",$.mainctx.fillRect(0,0,$.W,$.H),i=0;i<5e3;i++){var e=Math.random()*$.W,t=Math.random()*$.H,a=.1*(10*Math.random()+1);$.mainctx.fillStyle="rgba(255,255,255,"+a+")",$.mainctx.fillRect(e,t,1,1)}$.mainctx.drawImage($.playerSprite,$.W/2-13,175)},$.touchstart=function(e){e.preventDefault(),$.Player.moveTimer=7,e=e.touches?e.touches[e.touches.length-1]:e,e.clientX<$.W/4&&($.keys.a=1),e.clientX>$.W-$.W/4&&($.keys.d=1),e.clientY<$.H/4&&($.keys.w=1),e.clientY>$.H-$.H/4&&($.keys.s=1),0==$.keys.a&&0==$.keys.w&&0==$.keys.s&&0==$.keys.d&&(void 0!=$.newMessage?$.newMessage.exit():void 0!=$.battle?$.battle.showActions():$.onclick())},$.touchmove=function(e){e.preventDefault()},$.touchend=function(e){e.preventDefault(),$.keys.a=0,$.keys.d=0,$.keys.w=0,$.keys.s=0},$.startPlaying=function(){$.playing=!0,$.world=new $.worldCreator,$.loop(),document.getElementById("titleScreen").style.display="none",document.getElementById("options").style.display="block",$.newMessage=new $.message("How did you get here? <BR><br>That cave to the right of you looks like a good place to start.")},$.keydown=function(e){32===e.keyCode,87===e.keyCode&&($.keys.w=1),83===e.keyCode&&($.keys.s=1),68===e.keyCode&&($.keys.d=1),65===e.keyCode&&($.keys.a=1)},$.keyup=function(e){$.Player.moveTimer=9,32===e.keyCode&&(void 0!=$.newMessage?$.newMessage.exit():void 0!=$.battle?$.battle.showActions():$.onclick()),87===e.keyCode&&($.keys.w=0),83===e.keyCode&&($.keys.s=0),68===e.keyCode&&($.keys.d=0),65===e.keyCode&&($.keys.a=0)},$.onclick=function(){void 0!=$.context&&$.context()},window.addEventListener("load",function(){$.setup()});var levels=[{XPneeded:50,Strength:2,MaxHP:2,MaxMP:1,spell:$.spell[1]},{XPneeded:130,Strength:1,Resilience:1,MaxHP:3,MaxMP:2},{XPneeded:230,Strength:1,MaxHP:2,MaxMP:1,spell:$.spell[0]},{XPneeded:370,Strength:1,Resilience:1,MaxHP:2,MaxMP:1},{XPneeded:530,Strength:1,MaxHP:2,MaxMP:1,spell:$.spell[2]},{XPneeded:730,Strength:1,Resilience:1,MaxHP:2,MaxMP:1},{XPneeded:1e3,Strength:1,MaxHP:2,MaxMP:1,spell:$.spell[3]},{XPneeded:1500,Strength:1,Resilience:1,MaxHP:2,MaxMP:1},{XPneeded:2e3,Strength:1,MaxHP:2,MaxMP:1},{XPneeded:2500,Strength:1,Resilience:1,MaxHP:2,MaxMP:1}];$.message=function(e,t){this.screen=document.getElementById("genMessage"),this.efunc=t,this.screen.innerHTML=e,this.screen.style.display="block"},$.message.prototype.exit=function(){void 0!=this.efunc&&this.efunc(),this.screen.style.display="none",$.newMessage=void 0},$.person=function(e){for(var t in e)this[t]=e[t];this.alive=this.alive||function(){return 1},this.contextclue=!1,this.status=1},$.person.prototype.update=function(){this.alive()?this.x/25>=$.Player.x/25-1&&this.x/25<=$.Player.x/25+1&&this.y/25>=$.Player.y/25-1&&this.y/25<=$.Player.y/25+1?(this.contextclue=!0,$.context=this.text):(this.contextclue=!1,this.text==$.context&&($.context=void 0)):this.text==$.context&&($.context=void 0)},$.person.prototype.draw=function(){this.alive()&&($.mainctx.drawImage($.chars[this.image],this.x,this.y),this.contextclue&&void 0!=this.text&&$.mainctx.drawImage($.types[13],this.x+12.5,this.y-15))},$.player=function(){this.name="Cloud",this.Strength=2,this.Resilience=3,this.Avoidance=96,this.MaxHP=15,this.MaxMP=5,this.HP=this.MaxHP,this.MP=this.MaxMP,this.Defense=this.Resilience+0,this.xp=0,this.Level=0,this.gold=0,this.Status=null,this.canReverse=!1,this.Armor=armor[0],this.Weapon=weapon[0],this.Shield=shield[0],this.Inventory=[armor[0],weapon[0],shield[0]],this.Spells=[],this.x=750,this.y=250,this.damageTick=60,this.damageTimer=60,this.moveTick=8,this.moveTimer=8,this.recievingDamage=0,this.opac=.75,this.inventoryScreen=document.getElementById("inventoryMenu"),this.inventoryGold=document.getElementById("playerGold"),this.inventoryStats=document.getElementById("playerstats"),this.inventoryItems=document.getElementById("playerItems"),this.inventoryOptions=document.getElementById("inventoryOptions")},$.player.prototype.attack=function(){var e=$.battle.enemy,t=Math.max(this.Strength+this.Weapon.damage-e.Defense,1);return e.HP-=t,e.HP<=0&&(e.Status="Dead"),t},$.player.prototype.flee=function(){},$.player.prototype.useSpell=function(e){var t=this.Spells[e],a=0;if(void 0!=t.damage){var n=$.battle.enemy;n.HP-=t.damage,this.MP-=t.mp,a=t.damage,n.HP<=0&&(n.Status="Dead")}else void 0!=t.heal&&(this.HP=Math.min(t.heal+this.HP,this.MaxHP),this.MP-=t.mp,a=t.heal,void 0==$.battle&&(this.closeInventory(),$.newMessage=new $.message("You have been healed by "+a)));return a},$.player.prototype.useItem=function(){},$.player.prototype.addInventory=function(e){this.Inventory.push(e)},$.player.prototype.buy=function(e){e.cost<=this.gold?("inn"==e.type?(this.HP=this.MaxHP,this.MP=this.MaxMP):(this.addInventory(e),"item"!=e.type&&this.equip(e)),this.gold-=e.cost):$.newStore.efunc=function(){$.newStore.exit(),$.newMessage=new $.message("Sorry, you don't have enough gold for that.")}},$.player.prototype.equip=function(e){"weapon"==e.type?this.Weapon=e:"armor"==e.type?this.Armor=e:"shield"==e.type&&(this.Shield=e),this.updateStats()},$.player.prototype.levelUp=function(e){this.xp+=e;var t=levels[this.Level];return void 0!=t&&this.xp>=t.XPneeded?(this.Strength+=t.Strength||0,this.Agility+=t.Agility||0,this.Resilience+=t.Resilience||0,this.MaxHP+=t.MaxHP||0,this.MaxMP+=t.MaxMP||0,void 0!=t.spell&&this.Spells.push(t.spell),this.Level+=1,levels[this.Level-1]):void 0},$.player.prototype.update=function(){this.moveTimer+=$.dt,void 0==$.battle&&void 0==$.newStore&&"block"!=document.getElementById("endScreen").style.display&&void 0==$.newMessage&&"block"!=this.inventoryScreen.style.display&&this.moveTimer>this.moveTick&&($.keys.s&&this.moveDown(),$.keys.d&&this.moveRight(),$.keys.a&&this.moveLeft(),$.keys.w&&this.moveUp(),$.keys.space,this.moveTimer=0),this.validMove(this.x,this.y)?(1==this.recievingDamage&&$.frontctx.clearRect(0,0,$.W,$.H),this.recievingDamage=0):(this.recievingDamage=1,this.damageTimer+=$.dt,this.damageTimer>this.damageTick&&this.HP>0&&(this.opac=.75,this.HP-=1,this.damageTimer=0),this.opac-=.01),this.HP<=0&&($.deathmenu.style.display="block",document.getElementById("options").style.display="none",void 0!=$.battle&&$.battle.close())},$.player.prototype.showInventory=function(){this.updateStats(),this.inventoryItems.innerHTML="",this.inventoryScreen.style.display="block"},$.player.prototype.updateStats=function(){this.inventoryGold.innerHTML=this.gold+"g",this.inventoryStats.innerHTML="Level:"+this.Level+"<br>",this.inventoryStats.innerHTML+="HP:"+this.HP+"/"+this.MaxHP+" <br>",this.inventoryStats.innerHTML+="MP:"+this.MP+"/"+this.MaxMP+" <br>",this.inventoryStats.innerHTML+="Attack: "+(this.Strength+this.Weapon.damage)+" <br>",this.inventoryStats.innerHTML+="Defense: "+(this.Resilience+this.Armor.armor+this.Shield.armor)+" <br>",this.inventoryStats.innerHTML+="XP to next level: "+(void 0!=levels[this.Level]?levels[this.Level].XPneeded-this.xp:0)+" <br>",this.inventoryStats.innerHTML+="Armor: "+this.Armor.name+" <br>",this.inventoryStats.innerHTML+="Weapon: "+this.Weapon.name+" <br>",this.inventoryStats.innerHTML+="Shield: "+this.Shield.name+" <br>"},$.player.prototype.showSpells=function(){this.inventoryItems.innerHTML="",this.inventoryItems.style.display="block";for(var e=this.Spells.length;e--;)if(void 0!=this.Spells[e].heal){var t=this.Spells[e].mp>this.MP?"disabled":"";this.inventoryItems.innerHTML+="<button "+t+" onclick='$.Player.useSpell("+e+" )'>"+this.Spells[e].name+"<div class='mp'>"+this.Spells[e].mp+" mp</div></button>"}this.inventoryScreen.style.display="block"},$.player.prototype.showEquipment=function(){this.inventoryItems.innerHTML="",this.inventoryItems.style.display="block";for(var e in this.Inventory)this.inventoryItems.innerHTML+="<button onclick='$.Player.equip($.Player.Inventory["+e+"]);'>"+this.Inventory[e].name+"</button>";this.inventoryScreen.style.display="block"},$.player.prototype.clickBack=function(){},$.player.prototype.closeInventory=function(){this.inventoryScreen.style.display="none"},$.player.prototype.validMove=function(e,t){if($.reverse&&$.currentMap.canReverse)var a=$.currentMap.graph[t/25][$.currentMap.graph[t/25].length-e/25];else var a=$.currentMap.graph[t/25][e/25];return 1==a||2==a||3==a||5==a||16==a||28==a?!0:!1},$.player.prototype.isfight=function(){var e=100*Math.random()>this.Avoidance;1==e&&$.currentMap.danger&&($.battle=new $.battleSystem)},$.player.prototype.moveUp=function(){this.validMove(this.x,this.y)&&this.validMove(this.x,this.y-25)&&(this.y-=25,this.isfight())},$.player.prototype.moveDown=function(){this.validMove(this.x,this.y)&&this.validMove(this.x,this.y+25)&&(this.y+=25,this.isfight())},$.player.prototype.moveLeft=function(){this.validMove(this.x,this.y)&&this.validMove(this.x-25,this.y)&&(this.x-=25,this.isfight())},$.player.prototype.moveRight=function(){this.validMove(this.x,this.y)&&this.validMove(this.x+25,this.y)&&(this.x+=25,this.isfight())},$.player.prototype.draw=function(){if($.mainctx.save(),$.mainctx.fillStyle="#000",$.mainctx.strokeStyle=$.mainctx.fillStyle,$.mainctx.drawImage($.playerSprite,this.x,this.y),$.mainctx.restore(),this.recievingDamage&&this.HP>0&&($.frontctx.clearRect(0,0,$.W,$.H),$.frontctx.fillStyle="rgba(255,0,0,"+this.opac+")",$.frontctx.strokeStyle=$.frontctx.fillStyle,$.frontctx.fillRect(0,0,$.W,$.H)),this.HP<=0)for(var e=10;e--;){$.frontctx.shadowBlur=20,$.frontctx.shadowColor="black",$.frontctx.fillStyle="rgba(255,0,0,1.0)",$.frontctx.strokeStyle=$.frontctx.fillStyle;var t=25*Math.random();$.frontctx.fillRect(Math.random()*$.W,Math.random()*$.H,t,t)}},$.store=function(e,t){this.screen=document.getElementById("storeMenu"),this.playerGold=document.getElementById("storeGold"),this.items=document.getElementById("storeItems"),this.efunc=t,this.items.innerHTML="";for(var a=store[e],n=a.length;n--;)this.items.innerHTML+="<button onclick='$.newStore.buy(store["+e+"]["+n+"]);'>"+a[n].name+"</button>"+a[n].cost+"G";this.playerGold.innerHTML=$.Player.gold+"g",this.screen.style.display="block"},$.store.prototype.buy=function(e){$.Player.buy(e),void 0!=this.efunc&&this.efunc()},$.store.prototype.exit=function(){this.screen.style.display="none",$.newStore=void 0};var pixelSize=1.3,tileSize=25,goodPalette=["#000000","#fff390","#ff0000","#0000ff","#5c5000","#b8f818","#01AB00","#FFE3AB","#1e91bc","#74cbec","#44add5","#31a2cc","#bfbfbf","#7f7f7f","#fff"];badPalette=["#000000","#fff390","#ff0000","#0000ff","#5c5000","#b8f818","#01AB00","#FFE3AB","#000","#ff0000","#c50000","#860000","#bfbfbf","#7f7f7f","#fff"];var mountainPalette=[goodPalette[0],goodPalette[12],goodPalette[13]],mountainMapping=[[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,2,1,0,0,0,0,0,0,1,3,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,2,1,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,3,2,1,0,0,0,1,3,3,3,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,3,2,1,0,0,1,3,3,3,2,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,3,2,1,0,1,3,3,3,3,2,1,0,0,0,0,0,0,0],[0,0,0,0,1,1,3,3,2,1,1,3,3,3,3,3,2,1,0,0,0,0,0,0,0],[0,0,0,0,1,1,3,3,3,3,3,3,3,3,3,3,2,1,0,0,0,0,0,0,0],[0,0,0,0,1,1,3,3,3,3,3,3,3,3,3,3,3,2,1,0,0,0,0,0,0],[0,0,0,0,1,1,3,2,3,3,3,3,3,3,3,3,3,2,1,0,0,0,0,0,0],[0,0,0,1,1,3,3,2,3,3,3,3,3,3,3,3,3,2,1,0,0,0,0,0,0],[0,0,0,1,1,3,3,2,3,3,3,3,3,3,3,3,3,2,1,0,0,0,0,0,0],[0,0,1,1,3,3,2,2,3,3,3,3,3,3,3,3,3,3,2,1,0,0,0,0,0],[0,0,1,1,3,3,2,3,3,3,3,3,3,3,2,1,3,3,2,1,0,0,0,0,0],[0,0,1,1,3,3,2,3,3,3,3,3,3,3,2,3,3,3,2,1,0,0,0,0,0],[0,0,1,1,3,3,3,3,3,3,3,3,3,3,3,2,1,3,3,2,1,0,0,0,0],[0,0,1,1,3,3,3,3,3,3,3,3,3,3,3,2,1,3,3,3,2,1,0,0,0],[0,0,1,1,3,3,1,1,3,3,3,3,3,3,3,2,2,3,3,3,2,1,0,0,0],[0,1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,2,1,3,3,2,1,0,0,0],[0,1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,2,1,3,3,3,2,1,0,0],[0,1,1,3,3,1,1,3,2,3,3,3,3,3,3,3,2,2,1,3,3,2,1,0,0],[1,1,3,3,3,1,1,2,2,1,3,3,3,3,3,3,2,2,1,3,3,2,1,0,0],[1,1,3,3,1,1,3,2,2,1,1,3,3,3,3,3,2,2,1,3,3,3,2,1,0],[0,1,1,1,1,1,3,2,3,3,1,3,3,3,3,3,3,2,2,1,3,3,2,1,0]],cavePalette=[goodPalette[0],goodPalette[12],goodPalette[13]],caveMapping=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,3,3,3,3,3,3,3,3,3,3,1,0,0,0,0,0,0,0],[0,0,0,0,1,3,3,3,1,1,1,1,1,1,1,1,1,3,1,0,0,0,0,0,0],[0,0,0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0,0,0,0],[0,0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0,0,0],[0,0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0,0],[0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0],[0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0],[0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0],[0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0],[0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0],[0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0],[0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0],[0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0],[0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0],[0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0],[0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0],[0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0],[0,1,3,3,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,3,1,0,0],[0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0],[0,1,3,3,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,3,1,0,0],[0,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,0,0]],townPalette=[goodPalette[0],goodPalette[13],goodPalette[14]],townMapping=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0],[0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,3,1,0,0,0,0,0],[0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,3,3,3,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,1,0,0,0,0],[0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,1,3,3,3,3,1,0,0,0,0],[0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,1,3,3,3,3,1,0,0,0,0],[0,1,3,3,1,1,3,3,3,1,1,3,3,3,3,1,3,3,1,3,1,0,0,0,0],[0,1,3,3,1,1,3,3,3,1,1,3,3,3,3,1,3,1,1,3,1,0,0,0,0],[0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,1,3,1,1,1,0,0,0,0,0],[0,1,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,1,3,3,3,3,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,0],[0,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,3,1,0,0],[0,0,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,3,3,3,1,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,1,0],[0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,1,3,3,3,3,1,0],[0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,1,3,3,3,3,1,0],[0,0,0,0,1,3,3,1,1,3,3,3,3,1,1,3,3,3,1,3,3,1,3,1,0],[0,0,0,0,1,3,3,1,1,3,3,3,3,1,1,3,3,3,1,3,1,1,3,1,0],[0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,1,3,1,1,1,0,0],[0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,1,3,1,1,0,0,0],[0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,1,3,1,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],waterLandRightMapping=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1]],waterLandBottomMapping=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,2,2,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0],[2,2,2,2,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,2],[1,1,1,1,2,2,0,0,0,0,0,2,2,1,1,1,1,2,2,0,0,0,0,2,2],[1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,1,1]],waterLandTopMapping=[[1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,1,1],[1,1,1,1,2,2,0,0,0,0,0,2,2,1,1,1,1,2,2,0,0,0,0,2,2],[2,2,2,2,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,2],[0,2,2,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],waterLandLeftMapping=[[1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],playerPalette=[goodPalette[0],goodPalette[1],goodPalette[2],goodPalette[3],goodPalette[4]],npcPalette=["#000","#fff390","#fff","#000","#0c00ff"],npc2Palette=["#000","#ac6c50","#fff","#ff0000","#000"],npc3Palette=["#000","#fff390","#ada7a9","#ada7a9","#fff390"],playermapping=[[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,1,1,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,1,1,0,0],[0,0,1,1,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,1,1,0,0],[1,1,5,5,5,5,2,2,2,2,2,2,2,2,2,2,2,2,2,5,5,5,5,1,1],[1,1,5,5,5,5,2,2,2,2,1,1,2,2,2,2,1,1,2,5,5,5,5,1,1],[1,1,5,5,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,5,5,1,1],[1,1,5,5,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,5,5,1,1],[1,1,5,5,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,5,5,1,1],[1,1,5,5,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,5,5,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1],[0,0,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,0,0],[0,0,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,1,1,2,2,1,1,3,3,3,3,3,3,3,3,3,1,1,2,2,1,1,0,0],[0,0,1,1,2,2,1,1,3,3,3,3,3,3,3,3,3,1,1,2,2,1,1,0,0],[0,0,0,0,1,1,1,1,4,4,4,4,4,4,4,4,4,1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1,4,4,4,4,4,4,4,4,4,1,1,1,1,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0]],contextCluePalette=[goodPalette[0],"#ffffff"],contextClue=[[0,0,1,1,1,0,0],[0,1,2,2,2,1,0],[1,2,2,2,2,2,1],[1,2,2,2,2,2,1],[1,2,2,2,2,2,1],[1,2,2,2,2,2,1],[1,2,2,2,2,2,1],[0,1,2,2,2,1,0],[0,1,2,2,2,1,0],[0,0,1,1,1,0,0],[0,1,2,2,2,1,0],[0,1,2,2,2,1,0],[0,1,2,2,2,1,0],[0,0,1,1,1,0,0]],dog=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,2,2,2,2,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,2,2,1,2,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,2,2,1,2,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,2,2,2,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,2,2,2,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,2,2,2,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,2,2,2,0,2,2,2,2,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],blank=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],creepythinPalette=["#000","#fff390","#5a5000","#0012bb","#686868"],creepythin=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,5,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,5,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,3,3,2,3,0,0,0,0,5,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,5,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,5,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,5,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,5,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,2,3,3,3,3,2,0,0,5,5,5,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,2,3,3,3,3,0,2,2,2,5,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,2,1,1,1,1,0,0,0,0,5,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,2,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0]],yetiPalette=["#fff390","#5a5000","#000"],yeti=[[0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,2,1,3,1,1,3,1,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,2,1,1,1,1,1,1,2,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,2,1,1,1,1,2,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,2,2,2,2,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0]],slimePalette=["#000","#ff0000","#fff","#0c00ff"],slime=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,4,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,4,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,4,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,4,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,4,4,4,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,3,3,4,4,4,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,3,3,3,4,4,4,4,4,4,4,4,1,1,0,0,0,0,0],[0,0,0,0,1,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0],[0,0,0,1,4,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0],[0,0,0,1,4,4,4,4,4,3,4,4,4,4,4,3,4,4,4,4,4,1,0,0,0],[0,0,0,1,4,4,4,3,3,1,3,4,4,4,3,1,3,3,4,4,4,1,0,0,0],[0,0,0,1,4,4,4,4,4,3,4,4,4,4,4,3,4,4,4,4,4,1,0,0,0],[0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0],[0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0],[0,0,0,1,4,4,4,4,2,2,4,4,4,4,4,2,2,4,4,4,4,1,0,0,0],[0,0,0,0,1,4,4,4,4,4,2,2,2,2,2,4,4,4,4,4,1,0,0,0,0],[0,0,0,0,0,1,1,1,4,4,4,4,4,4,4,4,4,1,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],regbatPalette=["#000","#ada7a9"],batPalette=["#000","#ff0000"],bat=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0],[0,0,0,0,0,1,2,1,0,0,0,1,0,0,1,0,0,1,2,1,0,0,0,0,0],[0,0,0,0,1,2,2,1,0,0,0,1,0,0,1,0,0,1,2,2,1,0,0,0,0],[0,0,0,1,2,2,2,1,0,0,0,1,0,0,1,0,0,1,2,2,2,1,0,0,0],[0,0,0,1,2,2,2,1,1,1,1,2,1,1,2,1,1,1,2,2,2,2,1,0,0],[0,0,1,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,1,0,0],[0,0,1,2,2,2,2,1,2,2,1,1,1,1,1,2,2,1,2,2,2,2,1,0,0],[0,0,1,2,2,2,2,1,2,2,1,1,1,1,1,2,2,1,2,2,2,2,1,0,0],[0,0,1,2,2,0,0,1,0,0,0,1,1,1,1,0,0,1,0,0,2,2,1,0,0],[0,0,1,2,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,2,1,0,0],[0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0]],groundPalette=["#000","#e4cb4a","#e4cb4a"],brick2Palette=["#000","#ada7a9","#ada7a9"],brickPalette=["#000","#ada7a9","#636260"],brick=[[2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2],[2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2],[2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2],[2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1],[2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1],[2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1],[2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2],[2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2],[2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2],[2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,2,2],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[3,3,3,1,3,3,3,3,3,3,1,3,3,3,3,3,3,1,3,3,3,3,3,3,1],[3,3,3,1,3,3,3,3,3,3,1,3,3,3,3,3,3,1,3,3,3,3,3,3,1],[3,3,3,1,3,3,3,3,3,3,1,3,3,3,3,3,3,1,3,3,3,3,3,3,1],[3,3,3,1,3,3,3,3,3,3,1,3,3,3,3,3,3,1,3,3,3,3,3,3,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[3,3,3,3,3,3,1,3,3,3,3,3,3,1,3,3,3,3,3,3,1,3,3,3,3],[3,3,3,3,3,3,1,3,3,3,3,3,3,1,3,3,3,3,3,3,1,3,3,3,3],[3,3,3,3,3,3,1,3,3,3,3,3,3,1,3,3,3,3,3,3,1,3,3,3,3],[3,3,3,3,3,3,1,3,3,3,3,3,3,1,3,3,3,3,3,3,1,3,3,3,3],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],bearPalette=["#7f452e","#b18565","#906d54","#000"],bear=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,4,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,4,1,1,1,1,4,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,2,3,3,2,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,2,4,4,2,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,2,4,4,2,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,1,2,2,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,2,2,2,2,2,2,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,2,2,2,2,2,2,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,2,2,2,2,2,2,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,2,2,2,2,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,2,2,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],weaponStore=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,2,2,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,1],[1,1,2,2,2,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,1],[1,2,1,2,2,2,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,1],[1,2,3,1,2,2,2,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,1],[1,2,3,3,1,2,2,2,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,1],[1,2,3,3,3,1,2,2,2,1,3,3,3,3,3,3,3,3,3,3,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,2,1,3,3,3,3,3,3,3,3,3,3,3,3,2,1],[1,2,3,3,3,3,3,1,2,2,2,1,3,3,3,3,3,3,3,3,3,3,3,2,1],[1,2,3,3,3,3,3,3,1,2,2,2,1,3,3,3,3,3,3,3,3,3,3,2,1],[1,2,3,3,3,3,3,3,3,1,2,2,2,1,3,3,3,3,3,3,3,3,3,2,1],[1,2,3,3,3,3,3,3,3,3,1,2,2,2,1,3,3,3,3,3,3,3,3,2,1],[1,2,3,3,3,3,3,3,3,3,3,1,2,2,2,1,3,3,3,3,3,3,3,2,1],[1,2,3,3,3,3,3,3,3,3,3,3,1,2,2,2,1,3,3,3,3,3,3,2,1],[1,2,3,3,3,3,3,3,3,3,3,3,3,1,2,2,2,1,3,3,3,3,3,2,1],[1,2,3,3,3,3,3,3,3,3,3,3,3,3,1,2,2,2,1,3,3,3,1,1,1],[1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,1,2,2,2,1,3,1,2,1,1],[1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,2,2,2,1,2,1,2,1],[1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,2,1,2,1,3,2,1],[1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,2,2,1,3,2,1],[1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,2,1,1,2,1,2,1],[1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,2,1,3,3,1,2,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,1,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],innStore=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,1],[1,2,3,3,3,3,1,1,1,1,3,3,3,3,3,3,1,1,1,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,3,3,3,3,3,3,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,3,3,3,3,3,3,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,3,3,3,3,3,3,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,3,3,3,3,3,3,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,3,3,3,3,3,3,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,1,1,1,1,1,1,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,2,2,2,2,2,2,2,2,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,2,2,2,2,2,2,2,2,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,1,1,1,1,1,1,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,3,3,3,3,3,3,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,3,3,3,3,3,3,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,3,3,3,3,3,3,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,3,3,3,3,3,3,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,3,3,3,3,3,3,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,3,3,3,3,3,3,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,3,3,3,3,3,3,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,2,2,1,3,3,3,3,3,3,1,2,2,1,3,3,3,2,1],[1,2,3,3,3,3,1,1,1,1,3,3,3,3,3,3,1,1,1,1,3,3,3,2,1],[1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],ninjaPalette=["#000","#fff390","#ff0000"],ninja2Palette=["#000","#fff390","#fff000"],ninja=[[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[1,1,1,2,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,2,1,1],[1,1,1,2,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,2,1,1],[1,1,1,2,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,2,1,1],[1,1,1,2,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,2,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,0,0],[0,0,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,3,3,3,3,3,3,3,3,3,3,3,1,1,1,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0]],treePalette=["#844a22","#008931","#fff","#3ca83b"],tree=[[0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,2,4,4,4,4,4,4,4,4,2,2,2,2,2,2,2,0,0,0,0,0],[0,0,0,0,2,4,4,4,4,4,4,4,4,2,2,2,2,2,2,2,2,0,0,0,0],[0,0,0,2,2,4,4,4,4,4,4,4,4,2,2,2,2,2,2,2,4,4,0,0,0],[0,0,1,2,2,2,4,4,3,3,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0],[0,1,1,2,2,2,4,4,3,3,4,4,4,4,4,4,4,4,4,4,4,4,2,0,0],[0,1,1,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,2,0],[0,1,1,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,2,2,2,0],[0,1,1,2,2,2,2,2,2,2,4,4,4,4,4,4,4,3,3,4,4,2,2,2,0],[0,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,3,3,1,4,2,2,2,0],[0,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,4,2,2,2,0],[0,0,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,4,2,2,2,0],[0,0,0,0,1,1,1,3,3,1,1,1,1,1,1,1,1,1,1,1,2,2,2,0,0],[0,0,0,0,0,1,1,3,3,1,1,1,1,1,1,1,1,1,1,1,2,2,2,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0],[0,0,0,0,0,0,2,4,0,1,1,1,1,1,1,0,0,0,1,4,0,0,0,0,0],[0,0,0,0,0,0,2,4,0,0,0,1,2,0,0,0,0,0,1,4,0,0,0,0,0],[0,0,0,0,0,0,2,4,0,0,0,1,2,0,0,0,0,0,1,4,0,0,0,0,0],[0,0,0,0,0,0,2,4,0,0,0,1,2,0,0,0,0,0,1,4,0,0,0,0,0],[0,0,0,0,0,0,2,4,0,0,0,1,2,0,0,0,0,0,1,4,0,0,0,0,0],[0,0,0,0,0,0,2,4,0,0,0,1,2,0,0,0,0,0,1,4,0,0,0,0,0],[0,0,0,0,0,0,2,4,0,0,0,1,2,0,0,0,0,0,1,4,0,0,0,0,0],[0,0,0,0,0,2,2,2,4,0,1,1,1,2,0,0,0,1,1,1,4,0,0,0,0],[0,0,0,0,2,2,2,2,2,1,1,1,1,1,2,0,1,1,1,1,1,4,0,0,0],[0,0,0,2,2,2,2,2,1,1,1,1,1,1,1,2,1,1,1,1,1,1,4,0,0]];
$.worldCreator=function(){this.change()},$.worldCreator.prototype.update=function(){var e=$.currentMap.POI.filter(function(e){return e.x==$.Player.x/25&&e.y==$.Player.y/25});if(0!=e.length){$.npc=[],$.context=void 0,$.currentMap=e[0].map||$.worldMapping,$.Player.x=e[0].returnX||$.currentMap.PlayerInit.x,$.Player.y=e[0].returnY||$.currentMap.PlayerInit.y,this.change();for(var t=$.currentMap.People.length||0;t--;)$.npc.push(new $.person($.currentMap.People[t]));return $.currentMap.danger||void 0==$.battle||$.battle.close(),!0}},$.worldCreator.prototype.reverse=function(){},$.worldCreator.prototype.change=function(){if($.currentMap.background)for(var e=0;25>e;e++)for(var t=0;60>t;t++)$.backctx.drawImage($.types[6],25*t-4,25*e-3);else $.backctx.fillStyle="#000",$.backctx.strokeStyle=$.backctx.fillStyle,$.backctx.fillRect(0,0,$.W,$.H);document.getElementById("btnReverse").style.display=$.currentMap.canReverse&&$.Player.canReverse?"block":"none",$.currentMap.lighting?$.frontctx.clearRect(0,0,$.W,$.H):($.frontctx.save(),$.frontctx.fillStyle="#000",$.frontctx.strokeStyle=$.frontctx.fillStyle,$.frontctx.fillRect(0,0,$.W,$.H),$.frontctx.fillStyle="rgba(0, 0, 0, .55)",$.frontctx.globalCompositeOperation="destination-out",$.frontctx.strokeStyle=$.frontctx.fillStyle,$.frontctx.arc($.W/2+12.5,$.H/2+12.5,75,0,2*Math.PI,!0),$.frontctx.fill(),$.frontctx.restore())},$.worldCreator.prototype.draw=function(){if($.reverse&&$.currentMap.canReverse){for(var e=0;e<$.currentMap.graph.length;e++)for(var t=$.currentMap.graph[e].length;t>-1;t--)if($.currentMap.graph[e][t]){var a=$.currentMap.graph[e][t];9==a?a=10:10==a?a=9:28==a?a=9:8==a?a=11:11==a?a=8:19==a?a=20:20==a?a=19:24==a?a=25:25==a&&(a=24),$.mainctx.drawImage($.types[a],($.currentMap.graph[e].length-t)*tileSize,e*tileSize)}}else for(var e=0;e<$.currentMap.graph.length;e++)for(var t=0;t<$.currentMap.graph[e].length;t++)$.currentMap.graph[e][t]&&$.mainctx.drawImage($.types[$.currentMap.graph[e][t]],t*tileSize,e*tileSize)},$.per1=1,$.per2=1,$.per3=1,$.per4=1,$.cityMapping={name:"city",canReverse:0,danger:!1,background:0,lighting:1,graph:[[15,14,14,14,14,14,14,14,14,14,15,15,15,15,15],[15,26,26,26,26,26,26,26,26,26,15,15,15,15,15],[15,26,26,26,26,26,26,26,26,26,15,15,15,15,15],[15,26,15,14,14,15,14,14,15,26,14,14,14,14,15],[15,26,15,1,30,15,30,1,15,26,1,1,1,1,15],[14,26,14,17,5,14,5,27,14,1,1,1,1,1,15],[5,5,5,5,5,5,5,1,1,1,1,1,1,1,15],[15,7,7,7,7,7,11,26,1,1,1,1,1,26,15],[15,6,6,6,6,6,10,26,1,1,1,1,30,26,15],[15,6,6,6,6,6,10,26,1,1,1,26,26,26,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14]],PlayerInit:{x:25,y:150},POI:[{x:0,y:6,map:void 0,returnX:875,returnY:475}],People:[{x:100,y:100,image:10,text:function(){$.newStore=new $.store(0,function(){$.newStore.exit(),$.newMessage=new $.message("Thank you for your business, your new item is already equiped.")})}},{x:150,y:100,image:9,text:function(){$.newStore=new $.store(1,function(){$.newStore.exit(),$.newMessage=new $.message("You are now back to normal, HP and MP full.")})}},{x:300,y:200,image:7,text:function(){$.newMessage=new $.message("I hear you can get the Epic Shield and Epic Sword for free, you just have to find them. However, for the Epic Armor you will need  to face a dangerous cave dwelling ninja.")}}]},$.city2Mapping={name:"city",canReverse:0,danger:!1,background:0,lighting:1,graph:[[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[15,14,14,15,15,15,15,15,15,15,15,15,14,14,15],[15,1,30,15,15,14,14,14,14,14,15,15,30,1,15],[15,17,16,14,14,26,26,26,26,26,14,14,16,27,15],[15,1,16,1,1,26,6,6,6,26,1,1,16,1,15],[14,1,16,1,1,26,6,6,6,26,1,1,16,1,15],[16,16,16,16,16,26,6,6,6,26,16,16,16,1,15],[15,4,1,1,16,26,26,26,26,26,16,1,1,4,15],[15,4,4,1,16,16,16,16,16,16,16,1,4,4,15],[15,4,4,4,4,4,4,4,4,4,4,4,4,4,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14]],PlayerInit:{x:25,y:150},POI:[{x:0,y:6,map:void 0,returnX:1125,returnY:400}],People:[{x:50,y:50,image:10,text:function(){$.newStore=new $.store(2,function(){$.newStore.exit(),$.newMessage=new $.message("Thank you for your business, your new item is already equiped.")})}},{x:300,y:50,image:9,text:function(){$.newStore=new $.store(1,function(){$.newStore.exit(),$.newMessage=new $.message("You are now back to normal, HP and MP full.")})}}]},$.city3Mapping={name:"city",canReverse:0,danger:!1,background:0,lighting:1,graph:[[15,14,14,14,14,14,14,14,14,14,14,14,14,14,15],[15,18,18,18,18,18,18,18,18,18,18,18,18,6,15],[15,5,5,5,5,5,5,5,5,5,5,5,5,9,15],[15,1,1,1,26,26,26,26,26,26,26,1,5,9,15],[15,1,1,1,15,14,15,26,15,14,14,1,5,9,15],[14,1,1,1,17,1,15,26,15,30,1,1,5,9,15],[1,1,1,1,1,30,15,26,15,1,27,1,5,9,15],[15,1,1,1,14,14,14,26,14,14,14,1,5,9,15],[15,26,1,1,26,26,26,26,26,26,26,1,5,9,15],[15,26,26,1,1,1,1,1,1,1,1,1,5,9,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14]],PlayerInit:{x:25,y:150},POI:[{x:0,y:6,map:void 0,returnX:100,returnY:400}],People:[{x:125,y:150,image:10,text:function(){$.newStore=new $.store(3,function(){$.newStore.exit(),$.newMessage=new $.message("Thank you for your business, your new item is already equiped.")})}},{x:225,y:125,image:9,text:function(){$.newStore=new $.store(1,function(){$.newStore.exit(),$.newMessage=new $.message("You are now back to normal, HP and MP full.")})}}]},$.city4Mapping={name:"city",canReverse:0,danger:!1,background:0,lighting:1,graph:[[15,14,14,14],[15,30,1,1],[14,14,14,14]],PlayerInit:{x:50,y:25},POI:[{x:3,y:1,map:void 0,returnX:25,returnY:375}],People:[{x:25,y:25,image:7,alive:function(){return $.per4},text:function(){$.newMessage=new $.message("Haha! You found me, now take this epic sword, equip it and kill that wizard!",function(){$.Player.addInventory(weapon[3]),$.per4=0})}}]},$.endcityMapping={name:"city",canReverse:0,danger:!1,background:0,lighting:1,graph:$.cityMapping.graph,PlayerInit:{x:25,y:150},POI:[{x:0,y:6,map:void 0,returnX:350,returnY:475}],People:[{x:300,y:200,image:11,text:function(){$.newMessage=new $.message("You're me??? So you're the evil wizard invading these people's land! Off with your head!",function(){$.battle=new $.battleSystem(8,function(){$.battle.close(),document.getElementById("endScreen").style.display="block"})})}}]},$.caveMapping={name:"cave 1",canReverse:0,danger:!0,background:0,lighting:0,graph:[[14,14,14,14,14,14,14,14,14,14,14,14,14,14,15],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,15],[15,1,15,14,14,14,14,14,14,14,14,14,14,1,15],[15,1,15,1,1,1,1,1,1,1,1,1,1,1,15],[15,1,15,1,14,14,14,15,14,14,14,1,14,14,15],[15,1,15,1,1,1,1,15,1,1,1,1,1,1,15],[15,1,15,1,1,1,1,15,1,1,1,1,1,1,15],[15,1,15,1,1,1,1,15,14,14,14,14,14,1,15],[15,1,15,1,1,1,1,15,1,1,1,1,1,1,15],[15,1,15,1,1,1,1,15,30,1,1,1,1,1,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14]],PlayerInit:{x:25,y:25},POI:[{x:0,y:1,map:$.cave2Mapping,returnX:1025,returnY:100}],People:[{x:200,y:225,image:9,alive:function(){return $.per2},text:function(){$.newMessage=new $.message("Our land is being invaded by an evil wizard. I believe you have been sent to save us. His world, REVearth, is just like our Earth but backwards.  I give you the portal machine, use it while in the main map to travel between worlds and reach new islands. Just beware, the water mountains and trees are impassable and you will die if you stay in it too long.",function(){$.Player.canReverse=!0,$.per2=0})}}],enemylocations:[{x:0,y:0,w:1e4,h:1e4,type:[0,1]}]},$.cave2Mapping={name:"cave 1",canReverse:0,danger:!0,background:0,lighting:0,graph:[[15,14,14,14,14,14,14,14,14,14,14,14,14,14,15],[15,1,1,1,1,1,1,1,1,1,1,1,1,1,15],[15,1,14,14,14,14,14,14,15,1,15,1,1,1,15],[15,1,1,1,1,1,1,1,15,1,15,1,1,1,15],[15,14,14,15,1,1,1,1,15,1,15,1,1,1,15],[15,1,1,15,1,1,1,15,14,1,14,14,14,14,14,14,14,14,14,14,14,15],[15,1,1,14,1,1,1,15,1,1,1,1,1,1,1,1,1,1,1,1,30,15],[15,1,14,1,1,15,14,14,14,1,15,14,14,14,15,14,14,14,14,14,14,14],[14,14,1,1,1,15,1,1,1,1,14,1,1,1,15],[1,1,1,1,1,15,1,1,1,1,1,1,1,1,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14]],PlayerInit:{x:25,y:225},POI:[{x:0,y:9,map:void 0,returnX:850,returnY:150}],People:[{x:500,y:150,image:8,alive:function(){return $.per1},text:function(){$.battle=new $.battleSystem(9),$.per1=0}}],enemylocations:[{x:0,y:0,w:1e4,h:1e4,type:[3,5]}]},$.cave3Mapping={name:"cave 1",canReverse:0,danger:!0,background:0,lighting:0,graph:[[14,14,14,14,14,14,14,14,14,14,14,14,14,14,15],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,15],[15,1,15,14,14,14,14,14,14,14,14,14,14,1,15],[15,1,15,1,1,1,1,1,1,1,1,1,1,1,15],[15,1,15,1,15,14,14,14,14,14,14,14,14,1,15],[15,1,15,1,15,1,1,1,1,1,1,1,1,1,15],[15,1,15,1,15,1,15,14,14,14,14,14,14,1,15],[15,1,15,1,15,1,15,1,1,1,1,1,1,1,15],[15,1,14,1,14,1,14,1,14,14,14,14,14,1,15],[15,1,1,1,1,1,1,1,1,1,1,1,1,30,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14]],PlayerInit:{x:25,y:25},POI:[{x:0,y:1,map:void 0,returnX:325,returnY:150}],People:[{x:325,y:225,image:7,alive:function(){return $.per3},text:function(){$.newMessage=new $.message("Please stop that evil wizard, take this Epic Shield to help. Remember to equip it from your inventory menu.",function(){$.Player.addInventory(shield[3]),$.per3=0})}}],enemylocations:[{x:0,y:0,w:1e4,h:1e4,type:[3,4,5]}]},$.endcaveMapping={name:"cave 1",canReverse:0,danger:!0,background:0,lighting:0,graph:$.caveMapping.graph,PlayerInit:{x:25,y:25},POI:[{x:0,y:1,map:void 0,returnX:150,returnY:100}],People:[{x:200,y:225,image:9,text:function(){$.newMessage=new $.message("You again... Quit wasting time and go save our world!")}}],enemylocations:[{x:0,y:0,w:1e4,h:1e4,type:[5,6,7]}]},$.worldMapping={name:"main",canReverse:1,danger:!0,background:1,lighting:1,graph:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,18,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,19,1,1,20,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,18,18,18,19,1,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,18,18,19,1,1,1,1,1,20,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,19,1,1,1,1,1,1,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,1,1,1,1,1,1,1,1,1,1,20,0,0,0,0],[0,0,0,0,0,0,0,0,10,1,1,1,1,1,1,1,1,20,18,18,18,18,18,18,18,18,18,0,0,0,0,0,19,1,1,1,1,1,1,1,1,1,2,1,1,9,0,0,0],[0,0,0,0,0,0,0,0,0,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,0,0,0,19,1,1,1,1,1,4,4,1,1,1,1,1,1,20,0,0,0],[0,0,0,0,0,0,0,0,0,0,7,11,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,9,0,0,19,1,1,1,1,4,4,5,5,1,1,1,1,1,1,26,9,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,11,1,1,1,1,8,7,7,7,7,7,7,7,7,7,0,0,19,1,1,1,1,1,4,5,5,5,5,1,1,1,1,1,26,9,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,11,1,1,1,9,0,0,0,0,0,0,0,0,0,0,19,1,1,1,1,1,1,4,4,5,5,5,1,1,1,1,1,26,9,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,10,1,1,1,20,0,0,0,0,0,0,0,0,0,19,1,1,1,1,1,1,1,1,4,4,4,4,1,1,1,1,1,1,9,0,0],[0,0,0,0,18,0,0,0,0,0,0,0,0,0,11,1,1,1,20,0,0,0,0,0,0,0,10,26,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,12,1,1,9,0,0],[0,0,0,19,1,20,0,0,0,0,0,0,0,0,0,11,26,1,26,20,0,0,0,0,0,0,10,26,26,26,1,1,1,1,1,1,1,1,1,1,1,1,8,0,11,1,9,0,0],[0,0,19,1,1,1,20,0,0,0,0,0,0,0,0,0,24,1,26,26,9,0,0,0,0,0,10,26,26,26,26,26,1,1,1,1,1,1,1,1,1,8,0,0,0,7,0,0,0],[0,19,1,1,1,1,1,20,0,0,0,0,0,0,0,10,26,1,1,26,20,0,0,0,0,0,0,22,22,22,22,22,22,22,22,22,22,22,22,22,22,18,0,0,0,18,0,0,0],[10,1,1,8,7,11,1,1,20,0,0,0,0,0,0,0,7,11,1,1,1,9,0,0,0,0,10,26,26,1,1,1,1,1,1,1,1,1,1,1,1,1,20,0,10,1,9,0,0],[28,1,8,18,18,18,11,1,26,9,0,0,0,0,0,0,0,10,1,1,1,9,0,0,0,0,10,26,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,9,19,1,9,0,0],[10,1,23,3,1,26,23,1,26,9,0,0,0,0,0,0,0,0,7,7,7,0,0,0,0,0,0,11,1,1,1,1,1,1,1,1,1,1,1,4,4,4,1,21,1,1,9,0,0],[10,1,20,7,7,22,19,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,1,1,1,1,1,1,1,1,1,4,4,4,1,1,1,1,8,0,0,0],[10,1,1,20,19,1,1,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,1,1,1,1,1,1,1,1,1,4,4,4,1,1,1,8,0,0,0,0],[0,11,1,1,1,1,8,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,1,1,1,1,1,1,3,4,4,4,1,1,1,8,0,0,0,0,0],[0,0,11,26,26,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,1,1,1,1,26,26,26,26,1,1,1,8,0,0,0,0,0,0],[0,0,0,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,1,1,1,1,1,1,1,1,1,8,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,11,1,1,1,1,1,1,8,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,7,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],PlayerInit:{x:750,y:250},POI:[{x:36,y:19,map:$.cityMapping},{x:46,y:16,map:$.city2Mapping},{x:14,y:6,map:$.cave3Mapping},{x:7,y:4,map:$.endcaveMapping},{x:13,y:19,map:$.endcityMapping},{x:42,y:4,map:$.caveMapping},{x:35,y:6,map:$.cave2Mapping},{x:3,y:16,map:$.city3Mapping},{x:0,y:15,map:$.city4Mapping}],People:[],enemylocations:[{x:0,y:0,w:200,h:625,type:[6,7]},{x:200,y:0,w:450,h:625,type:[3,5]},{x:650,y:0,w:650,h:325,type:[0,1]},{x:650,y:325,w:650,h:325,type:[2,4]}],RevEnemylocations:[{x:0,y:0,w:550,h:325,type:[3,5]},{x:0,y:325,w:550,h:325,type:[6,7]},{x:550,y:0,w:450,h:625,type:[2,4]},{x:1e3,y:0,w:200,h:625,type:[0,1]}]};</script>



		<div id="options" ><button onclick="$.Player.showInventory();">Inventory</button><button id="btnReverse" onclick="$.worldTravel();$.reverse = !$.reverse;"><div id='revText' class='revtxt'>Go to REVearth</div></button>
			</div>
<div id="container">


	<div id="battleWindow" class="holdingRect">
		<div id="titlePlate" class="holdingRect">
			<div>Name: Cloud</div>
			<div>HP: <div id='hp'></div></div>
			<div>MP: <div id='mp'></div></div>
		</div>
		
		<div id="enemyPlate">
			<div class="centertext" id="enemyLook"><canvas id="enemyImage" width='25' height='25'></canvas></div>
		
		</div>
		
		<div id="actionPlate" class="holdingRect">
			<button onclick="$.battle.actionAttack();">Attack</button>
			<button onclick="$.battle.showSpells();">Magic</button>
			<button onclick="$.battle.actionRun();">Run</button>
		</div>
		<div id="spellsPlate" class="holdingRect">
			
		</div>
		<div id="outputPlate" class="holdingRect" onclick="$.battle.showActions();">
			
		</div>
		<div id="battleBack" ><button onclick="$.battle.showActions();">Back</button></div>
		
	</div>

<div id="deathmenu">You're Dead
	<div><a href="">REPLAY</a></div>
	</div>
	
<div id="genMessage" class="holdingRect messageMenu"  onclick="$.newMessage.exit();"></div>	

<div id="storeMenu"  class="holdingRect" >
	<div id="storeGold" class="holdingRect right"></div>
	Hurry up and buy something! You have a world to save!
	<div id="storeItems" class="holdingRect invItems"></div>
	<div class="right">
	<button onclick="$.newStore.exit();">Exit</button></div>
</div>

<div id="inventoryMenu"  class="holdingRect" >
	<div id="playerGold" class="holdingRect right"></div>
	<div id="playerstats" class="holdingRect"></div>
	<div id="inventoryOptions"><button onclick="$.Player.showSpells();">Magic</button><button onclick="$.Player.showEquipment();">Equip</button></div>
	<div id="playerItems" class="holdingRect invItems"></div>
	<div class="right"><button onclick="$.Player.closeInventory();">Exit</button></div>
</div>

	
<div id="titleScreen">ReUniVerse
	<div class="smalltxt">with Permadeath: You have been warned</div>
		<div class="smalltxt">by <a  class="smalltxt" href="http:\\twitter.com\xanmia">@Xanmia</a></div>
	<div><button onclick="$.startPlaying();">Play</button></div>
</div>

<div  class="messageMenu holdingRect" id="endScreen">Congratulations, you have defeated yourself and saved both worlds from dispair!  Unfortunately, you are also dead since you did indeed kill yourself... Thanks for playing!</div>
</div>

</body>
</html>